@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Authorization
@inject NavigationManager Navigation
@inject ILogger<RedirectToLogin> Logger

@code {
    [Parameter]
    public string ReturnUrl { get; set; } = "/";

    protected override void OnInitialized()
    {
        try
        {
            // Use NavigationManager to redirect to the Blazor login page
            var loginUrl = $"/login?returnUrl={Uri.EscapeDataString(ReturnUrl)}";
            Navigation.NavigateTo(loginUrl, replace: true);
        }
        catch (Exception ex)
        {
            Logger.LogError(ex, "Error during login redirect");
            // Fallback to simple navigation
            Navigation.NavigateTo("/login", replace: true);
        }
    }
}
